<!DOCTYPE html>
<html lang="en">
<head>  <meta charset="UTF-8" />  
  <meta name="viewport" content="width=device-width, maximum-scale=1.0, user-scalable=no" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; connect-src 'self' https: http://localhost:* ws://localhost:* wss://localhost:*; img-src 'self' data: https: blob:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; frame-src 'self' https://www.youtube.com https://youtube.com https://www.youtube-nocookie.com; media-src 'self' data: blob: https:; child-src 'self' https://www.youtube.com https://youtube.com https://www.youtube-nocookie.com;">
  <title>Tyumi</title>
  <meta name="description" content="An open source AI assistant platform that integrates with multiple AI providers including OpenAI, Anthropic, Google, Mistral, xAI, and local Ollama models." />

  <!-- Additional Meta Tags -->
  <meta name="author" content="Dustin Whyte">
  <meta name="keywords" content="AI assistant, Tyumi, AI chatbot, open source AI, OpenAI, Anthropic, Claude, Google Gemini, Mistral, xAI, Grok, Ollama, local AI models, chatbot platform, conversational AI, generative AI, large language model, AI integration, AI web app, AI privacy, AI security, AI productivity, AI tools, AI platform, artificial intelligence" />
  <meta name="theme-color" content="#1a1a1a" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <meta name="application-name" content="Tyumi">
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://tyumi.app/">
  <meta property="og:title" content="Tyumi - Open Source AI Assistant Platform">
  <meta property="og:description" content="An open source AI assistant platform integrating with OpenAI, Anthropic, Google, Mistral, xAI and local Ollama models.">
  <meta property="og:image" content="https://tyumi.app/logo.jpg">
  <meta property="og:site_name" content="Tyumi">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://tyumi.app/">
  <meta name="twitter:title" content="Tyumi - Open Source AI Assistant Platform">
  <meta name="twitter:description" content="An open source AI assistant platform integrating with OpenAI, Anthropic, Google, Mistral, xAI and local Ollama models.">
  <meta name="twitter:image" content="https://tyumi.app/logo.jpg">

  <!-- Mobile Web App -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Tyumi">
  
  <link rel="icon" type="image/x-icon" href="/src/assets/img/favicon.ico">

  <!-- Link to modular CSS -->
  <link rel="stylesheet" href="src/css/main.css" />

  <!-- DOMPurify for sanitizing HTML -->
  <script src="src/js/lib/purify.min.js"></script>

  <!-- Configuration file (ensure this is loaded first) -->
  <script src="src/config/config.js"></script>
  <!-- Load utility functions first -->  
  <script src="src/js/utils/utils.js"></script>
  <script src="src/js/utils/highlight.js"></script>
  <script src="src/js/utils/imageStorage.js"></script>
  <script src="src/js/utils/conversationStorage.js"></script>
  <!-- Mobile handling must load at startup for resize listeners -->
  <script src="src/js/utils/mobileHandling.js"></script>
  <script src="src/js/utils/notifications.js"></script>
  <script src="src/js/utils/menuSystem.js"></script>
  <script src="src/js/utils/tooltips.js"></script>
  <script src="src/js/utils/toolLoader.js"></script>
  <script src="src/js/utils/lazyLoader.js"></script>
  <!-- Load components next -->
  <script src="src/js/components/messages.js"></script>
  <script src="src/js/components/settings.js"></script>
  <script src="src/js/components/ui.js"></script>
  <script src="src/js/components/theme.js"></script>
  <script src="src/js/components/interaction.js"></script>
  <script src="src/js/components/attachments.js"></script>
  <script src="src/js/components/tools.js"></script>
  <script src="src/js/components/logo.js"></script>
  <!-- Load service functions -->  
  <script src="src/js/services/tools/definitions.js"></script>
  <script src="src/js/services/apiKeys.js"></script>
  <script src="src/js/services/api.js"></script>
  <script src="src/js/services/streaming.js"></script>
  <script src="src/js/services/history.js"></script>
  <script src="src/js/services/export.js"></script>
  
  <!-- Load initialization code -->
  <!-- Initialize global variables and state first -->
  <script src="src/js/init/globals.js"></script>
  
  <!-- Initialize DOM references -->
  <script src="src/js/init/dom.js"></script>
  
  <!-- Initialize model settings -->
  <script src="src/js/init/modelSettings.js"></script>
  
  <!-- Initialize markdown parser -->
  <script src="src/js/init/marked.js"></script>
  
  <!-- Initialize TTS functionality -->
  <script src="src/js/init/ttsInitialization.js"></script>
  
  <!-- Initialize about tab and crypto donations -->
  <script src="src/js/init/aboutTab.js"></script>
  
  <!-- About popup functionality -->
  <script src="src/js/components/aboutPopups.js"></script>
  
  <!-- Initialize services and models -->
  <script src="src/js/init/services.js"></script>
    <!-- Set up event listeners -->
  <script src="src/js/init/eventListeners.js"></script>
  
  <!-- Main initialization coordinator (must be last) -->
  <script src="src/js/init/initialization.js"></script>


</head>
<body>
  <div id="chat-container">
    <div id="header">
      <div class="branding-row">
        <div id="logo-container">          
          <!-- Stylized SVG logo for Tyumi -->
          <svg id="tyumi-logo" width="56" height="56" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g stroke="var(--accent-color)" stroke-width="1">
              <!-- Logo elements will be generated by logo.js -->
            </g>
          </svg>
        </div>
        <div>
          <h1 id="header-title">Tyumi</h1>
          <div id="model-info" class="prompt-container"></div>
        </div>
      </div>
    </div>
    <button
      id="settings-button"
      aria-expanded="false"
      aria-controls="settings-panel"
      title="Open Settings"
    >
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="3"></circle>
        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
      </svg>
    </button>
    <button
      id="history-button"
      aria-expanded="false"
      aria-controls="history-panel"
      title="Open Chat History"
    >
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <polyline points="12 6 12 12 16 14"></polyline>
      </svg>
    </button>
    <button
      id="gallery-button"
      aria-expanded="false"
      aria-controls="gallery-panel"
      title="Open Image Gallery"
    >
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        <circle cx="8.5" cy="8.5" r="1.5"></circle>
        <polyline points="21 15 16 10 5 21"></polyline>
      </svg>
    </button>

    <div id="chat-box" aria-live="polite"></div>

    <div class="input-container">
      <div class="input-wrapper">
        <div class="upload-previews"></div>
        <textarea
          id="user-input"
          placeholder="Type your message here..."
          rows="1"
          aria-label="User input"
        ></textarea>
        <button id="upload-button" title="Attach image">
          <svg class="upload-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M4 17v2a1 1 0 001 1h14a1 1 0 001-1v-2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <polyline points="7 9 12 4 17 9" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="12" y1="4" x2="12" y2="16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <input type="file" id="image-upload" accept="image/*" multiple style="display:none" />
        <button id="send-button" title="Send message">
          <svg class="send-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
          </svg>
          <svg class="stop-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
            <path d="M6 6h12v12H6z"/>
          </svg>
          <div class="stopping-spinner" style="display: none;">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
            </svg>
          </div>
        </button>
      </div>
    </div>    
    <div id="menu-panels-container">
      <!-- All menu panels content will be loaded here -->
    </div>
    
  </div>
  </body>
</html>
